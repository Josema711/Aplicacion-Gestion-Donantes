DROP TABLE DONANTE CASCADE CONSTRAINTS;
DROP TABLE DONACION CASCADE CONSTRAINTS;
DROP TABLE FORMULARIO CASCADE CONSTRAINTS;
DROP TABLE RELLENA CASCADE CONSTRAINTS;
DROP TABLE REALIZA CASCADE CONSTRAINTS;

CREATE TABLE DONANTE ( NºDONANTE NUMBER(5) CONSTRAINT DONANTE_PK PRIMARY KEY,
    NOMBRE VARCHAR2 (15) NOT NULL,
    APELLIDO1 VARCHAR2 (15) NOT NULL,
    APELLIDO2 VARCHAR2 (15) NOT NULL,
    IDENTIFICACION VARCHAR2 (9) NOT NULL,
    FECHA_NACIMIENTO VARCHAR2 (15),
    DIRECCION VARCHAR2 (20),
    POBLACION VARCHAR2 (15),
    CP NUMBER (5),
    TELEFONO NUMBER (9),
    CORREO VARCHAR2 (25) NOT NULL,
    SEXO VARCHAR (6) CONSTRAINT SEXO_CK CHECK(SEXO IN('HOMBRE','MUJER','H','M','Hombre','Mujer','hombre','mujer')),
    GRUPO_SANGUINEO VARCHAR2 (10) CONSTRAINT GRUPO_SANGUINEO_CK CHECK(GRUPO_SANGUINEO IN('AB+','AB-','A+','A-','B+','B-','O+','O-')),
    CICLO VARCHAR2 (20) CONSTRAINT CICLO_CK CHECK(CICLO IN('DAW','APC','INFANTIL','TAFAD','BACHILLERAT0'))
);


CREATE TABLE FORMULARIO ( CODIGO NUMBER (5) CONSTRAINT FORMULARIO_PK PRIMARY KEY,
    PREGUNTA1 VARCHAR2 (50) NOT NULL,
    PREGUNTA2 VARCHAR2 (50) NOT NULL,
    PREGUNTA3 VARCHAR2 (50) NOT NULL,
    PREGUNTA4 VARCHAR2 (50) NOT NULL,
    PREGUNTA5 VARCHAR2 (50) NOT NULL,
    PREGUNTA6 VARCHAR2 (50) NOT NULL,
    PREGUNTA7 VARCHAR2 (50) NOT NULL,
    PREGUNTA8 VARCHAR2 (50) NOT NULL,
    PREGUNTA9 VARCHAR2 (50) NOT NULL,
    PREGUNTA10 VARCHAR2 (50) NOT NULL,
    PREGUNTA11 VARCHAR2 (50) NOT NULL,
    PREGUNTA12 VARCHAR2 (50) NOT NULL,
    PREGUNTA13 VARCHAR2 (50) NOT NULL,
    PREGUNTA14 VARCHAR2 (50) NOT NULL,
    PREGUNTA15 VARCHAR2 (50) NOT NULL,
    PREGUNTA16 VARCHAR2 (50) NOT NULL,
    PREGUNTA17 VARCHAR2 (50) NOT NULL,
    PREGUNTA18 VARCHAR2 (50) NOT NULL,
    PREGUNTA19 VARCHAR2 (50) NOT NULL,
    PREGUNTA20 VARCHAR2 (50) NOT NULL,
    PREGUNTA21 VARCHAR2 (50) NOT NULL,
    PREGUNTA22 VARCHAR2 (50) NOT NULL,
    PREGUNTA23 VARCHAR2 (50) NOT NULL,
    PREGUNTA24 VARCHAR2 (50) NOT NULL,
    PREGUNTA25 VARCHAR2 (50) NOT NULL,
    PREGUNTA26 VARCHAR2 (50) NOT NULL,
    PREGUNTA27 VARCHAR2 (50) NOT NULL,
    PREGUNTA28 VARCHAR2 (50) NOT NULL,
    PREGUNTA29 VARCHAR2 (50) NOT NULL,
    PREGUNTA30 VARCHAR2 (50) NOT NULL,
    PREGUNTA31 VARCHAR2 (50) NOT NULL,
    EXCLUSION1 VARCHAR2 (50) NOT NULL,
    EXCLUSION2 VARCHAR2 (50) NOT NULL,
    EXCLUSION3 VARCHAR2 (50) NOT NULL,
    FECHA DATE,
    FECHA_EXCLUSION DATE,
    FECHA_DONACION DATE
);


CREATE TABLE DONACION ( NºDONACION NUMBER (5) CONSTRAINT DONACION_PK PRIMARY KEY,
    COD_COLECTA NUMBER (5) NOT NULL,
    TIPO_DONACION VARCHAR2 (10) CONSTRAINT TIPO_DONACION_CK CHECK(TIPO_DONACION IN('SANGRE','DIAFERESIS','Sangre','Diaferesis','sangre','diaferesis')),
    PULSO NUMBER (5) NOT NULL,
    TA_SIST NUMBER (5) NOT NULL,
    TA_DIAST NUMBER (5) NOT NULL,
    HB_CAP NUMBER (5) NOT NULL,
    HB_VEN NUMBER (5) NOT NULL,
    FECHA VARCHAR2 (15) NOT NULL
    
);

CREATE TABLE REALIZA ( 
    NºDONACION NUMBER(5) NOT NULL,
    NºDONANTE NUMBER(5) NOT NULL,
    
    CONSTRAINT REALIZA_PK PRIMARY KEY (NºDONACION, NºDONANTE),
    CONSTRAINT NºDONACION_FK1 FOREIGN KEY (NºDONACION) REFERENCES DONACION(NºDONACION) ON DELETE CASCADE,
    CONSTRAINT NºDONANTE_FK2 FOREIGN KEY (NºDONANTE) REFERENCES DONANTE(NºDONANTE) ON DELETE CASCADE
);

CREATE TABLE RELLENA (
    NºDONANTE NUMBER(5) NOT NULL,
    CODIGO NUMBER(5) NOT NULL,
    
    CONSTRAINT RELLENA_PK PRIMARY KEY (NºDONANTE,CODIGO),
    CONSTRAINT NºDONANTE_FK1 FOREIGN KEY (NºDONANTE) REFERENCES DONANTE(NºDONANTE) ON DELETE CASCADE,
    CONSTRAINT CODIGO_FK2 FOREIGN KEY (CODIGO) REFERENCES FORMULARIO(CODIGO) ON DELETE CASCADE
    
);